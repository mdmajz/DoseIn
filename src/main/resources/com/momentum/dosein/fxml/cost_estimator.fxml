<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.Spinner?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<BorderPane fx:id="rootPane" prefHeight="600" prefWidth="800" styleClass="dashboard-root" stylesheets="@../css/cost_estimator.css" xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.momentum.dosein.controller.CostEstimatorController">

    <!-- LEFT NAVIGATION -->
    <left>
        <VBox prefWidth="200" spacing="15" styleClass="nav-bar">
            <padding>
                <Insets bottom="20" left="15" right="15" top="20" />
            </padding>

            <!-- Logo and App Name -->
            <HBox fx:id="navHeader" alignment="CENTER_LEFT" prefHeight="70" spacing="12" styleClass="nav-header">
                <HBox alignment="CENTER_LEFT" spacing="12" styleClass="logo-container">
                    <ImageView fitHeight="30" fitWidth="30" preserveRatio="true">
                        <Image url="@../images/logo.png" />
                    </ImageView>
                    <Label styleClass="nav-logo" text="Doseln" />
                </HBox>
            </HBox>

            <!-- Navigation Menu -->
            <VBox spacing="8" styleClass="nav-menu-container">
                <Button onAction="#handleDashboard" styleClass="nav-item" text="Dashboard">
                    <graphic>
                        <ImageView fitHeight="18" fitWidth="18" preserveRatio="true">
                            <Image url="@../images/dashboard-icon.png" />
                        </ImageView>
                    </graphic>
                </Button>

                <Button onAction="#handleManageSchedule" styleClass="nav-item-schedule" text="Manage Schedule">
                    <graphic>
                        <ImageView fitHeight="18" fitWidth="18" preserveRatio="true">
                            <Image url="@../images/calendar-icon.png" />
                        </ImageView>
                    </graphic>
                </Button>

                <Button onAction="#handleCostEstimator" styleClass="nav-button-active" text="Cost Estimator">
                    <graphic>
                        <ImageView fitHeight="18" fitWidth="18" preserveRatio="true">
                            <Image url="@../images/calculator-icon.png" />
                        </ImageView>
                    </graphic>
                </Button>

                <Button onAction="#handleDoctorContacts" styleClass="nav-item-contacts" text="Doctor Contacts">
                    <graphic>
                        <ImageView fitHeight="18" fitWidth="18" preserveRatio="true">
                            <Image url="@../images/doctor-icon.png" />
                        </ImageView>
                    </graphic>
                </Button>

                <Button onAction="#handleEmergency" styleClass="nav-item" text="Emergency">
                    <graphic>
                        <ImageView fitHeight="18" fitWidth="18" preserveRatio="true">
                            <Image url="@../images/emergency-icon.png" />
                        </ImageView>
                    </graphic>
                </Button>

                <Button onAction="#handleAboutUs" styleClass="nav-item" text="About Us">
                    <graphic>
                        <ImageView fitHeight="18" fitWidth="18" preserveRatio="true">
                            <Image url="@../images/about-icon.png" />
                        </ImageView>
                    </graphic>
                </Button>
            </VBox>

            <Region VBox.vgrow="ALWAYS" />

            <VBox styleClass="signout-container">
                <Button onAction="#handleSignOut" styleClass="nav-signout" text="Sign Out">
                    <graphic>
                        <ImageView fitHeight="18" fitWidth="18" preserveRatio="true">
                            <Image url="@../images/signout-icon.png" />
                        </ImageView>
                    </graphic>
                </Button>
            </VBox>
        </VBox>
    </left>

    <!-- CENTER CONTENT -->
    <center>
        <VBox spacing="15" styleClass="main-content">
            <padding>
                <Insets bottom="20" left="20" right="20" top="20" />
            </padding>

            <!-- Header -->
            <VBox spacing="0" styleClass="header">
                <padding>
                    <Insets bottom="0" left="20" right="0" top="10" />
                </padding>
                <Label styleClass="page-title" text="Cost Estimator" />
                <Label styleClass="page-subtitle" text="Search for medicines and calculate total costs" />
            </VBox>

            <!-- Main Content Area -->
            <HBox maxWidth="570.0" minHeight="-Infinity" minWidth="-Infinity" prefHeight="444.0" prefWidth="570.0" spacing="15" styleClass="card" VBox.vgrow="ALWAYS">
                <!-- Left Side - Medicine Search -->
                <VBox prefHeight="414.0" prefWidth="222.0" spacing="10" styleClass="card-content" HBox.hgrow="NEVER">
                    <VBox maxHeight="-Infinity" maxWidth="-Infinity" prefHeight="414.0" prefWidth="220.0" spacing="8" style="-fx-background-color: #C4E3D4" styleClass="content-card">
                        <padding>
                            <Insets bottom="15" left="15" right="15" top="15" />
                        </padding>

                        <Label styleClass="card-title" text="Search Medicines" />

                        <TextField fx:id="searchField" promptText="Search by Name" styleClass="search-field" />

                        <VBox spacing="5">
                            <Label styleClass="section-label" text="Available Medicines" />
                            <ListView fx:id="medicineListView" prefHeight="234.0" prefWidth="194.0" styleClass="medicine-list" />
                        </VBox>

                        <HBox alignment="CENTER_LEFT" prefHeight="32.0" prefWidth="178.0" spacing="8">
                            <Label styleClass="field-label" text="Qty:" />
                            <Spinner fx:id="quantitySpinner" prefWidth="60" styleClass="quantity-spinner" />
                            <Button fx:id="addToCartButton" onAction="#handleAddToCart" prefHeight="30.0" prefWidth="86.0" styleClass="add-button" text="Add to List" />
                        </HBox>
                    </VBox>
                </VBox>

                <!-- Right Side - Shopping Cart -->
                <VBox maxHeight="455.0" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="455.0" prefWidth="263.0" spacing="10" styleClass="shopping-card" HBox.hgrow="ALWAYS">
                    <VBox maxHeight="-Infinity" maxWidth="-Infinity" prefHeight="394.0" prefWidth="262.0" spacing="8" style="-fx-background-color: #C4E3D4" styleClass="content-card" VBox.vgrow="ALWAYS">
                        <padding>
                            <Insets bottom="15" left="15" right="15" top="15" />
                        </padding>

                        <Label styleClass="card-title" text="Medicine List" />

                        <TableView fx:id="cartTableView" prefHeight="222.0" prefWidth="248.0" styleClass="cart-table" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="medicineNameColumn" prefWidth="120" text="Medicine" />
                                <TableColumn fx:id="quantityColumn" prefWidth="40" text="Qty" />
                                <TableColumn fx:id="priceColumn" prefWidth="70" text="Price" />
                                <TableColumn fx:id="totalColumn" prefWidth="70" text="Total" />
                            </columns>
                        </TableView>

                        <HBox alignment="CENTER_LEFT" spacing="8">
                            <Button fx:id="removeFromCartButton" onAction="#handleRemoveFromCart" prefWidth="70" styleClass="remove-button" text="Remove" />
                            <Button fx:id="clearCartButton" onAction="#handleClearCart" prefWidth="60" styleClass="clear-button" text="Clear" />
                            <Region HBox.hgrow="ALWAYS" />
                            <Label fx:id="totalCostLabel" styleClass="total-label" text="Total: à§³0.00" />
                        </HBox>
                    </VBox>
                </VBox>
            </HBox>
        </VBox>
    </center>
</BorderPane>
